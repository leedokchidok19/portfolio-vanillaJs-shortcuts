<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="author"        content="leedokchidok19">
    <meta name="description"   content="Shortcut keys that I use often are easy and quick to see.">
    <meta name="og:title"      content="lovelyShortcuts">
    <meta name="og:keywords"   content="단축키 익스텐션, 툴단축키, 브라켓 단축키,brackets shortcut, tool shortcut">

    <link rel="apple-touch-icon" sizes="57x57" href="image/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="image/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="image/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="image/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="image/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="image/icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="image/icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="image/icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="image/icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="image/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="image/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="image/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="image/icons/favicon-16x16.png">

    <meta name="msapplication-TileColor" content="#FFFBCC">
    <meta name="msapplication-TileImage" content="image/icons/ms-icon-144x144.png">
    <meta name="theme-color" content="#FFFBCC">

  <title>lovelyShortcut</title>
  <style>
    body { font-family: sans-serif; margin: 1rem; width: 380px; }

    form {
      display: grid;
      gap: 8px;
    }
    label { font-weight: bold; font-size: 14px; }
    input, button {
      padding: 8px;
      font-size: 14px;
    }
    button {
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover { background: #0056b3; }

    ul {
      list-style: none;
      padding: 0;
      margin-top: 1rem;
    }
    li {
      background: #f9f9f9;
      border-radius: 5px;
      padding: 6px 8px;
      margin-bottom: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    kbd {
      background: #eee;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 2px 6px;
      font-weight: bold;
    }
    .delete-btn {
      background: #dc3545;
      border: none;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
    }
    .delete-btn:hover { background: #a71d2a; }
  </style>
</head>
<body>
  <details open>
    <summary>Add Shortcut</summary>
    <form id="shortcutForm">
      <label>
        Keyboard Shortcut:
        <input type="text" id="shortcutKey" placeholder="e.g. Ctrl + N" required />
      </label>
      <label>
        Description:
        <input type="text" id="shortcutDesc" placeholder="e.g. Open a new window" required />
      </label>
      <button type="submit">Add</button>
    </form>
  </details>

  <h2>Shortcut List</h2>
  <ul id="shortcutList"></ul>

  <script>
    const form = document.getElementById('shortcutForm');
    const list = document.getElementById('shortcutList');

    // 저장된 단축키 불러오기
    function loadShortcuts() {
      chrome.storage.local.get('shortcuts', data => {
        const shortcuts = data.shortcuts || [];
        shortcuts.forEach(addShortcutToList);
      });
    }

    // 단축키를 UI에 추가
    function addShortcutToList(shortcut) {
      const li = document.createElement('li');
      li.innerHTML = `
        <span><kbd>${shortcut.key}</kbd> — ${shortcut.desc}</span>
        <button class="delete-btn">Delete</button>
      `;
      li.querySelector('.delete-btn').addEventListener('click', () => {
        li.remove();
        removeShortcut(shortcut);
      });
      list.appendChild(li);
    }

    // 단축키 저장
    function saveShortcut(shortcut) {
      chrome.storage.local.get('shortcuts', data => {
        const shortcuts = data.shortcuts || [];
        shortcuts.push(shortcut);
        chrome.storage.local.set({ shortcuts });
      });
    }

    // 단축키 삭제
    function removeShortcut(shortcutToRemove) {
      chrome.storage.local.get('shortcuts', data => {
        const updated = (data.shortcuts || []).filter(
          s => !(s.key === shortcutToRemove.key && s.desc === shortcutToRemove.desc)
        );
        chrome.storage.local.set({ shortcuts: updated });
      });
    }

    // 폼 제출 처리
    form.addEventListener('submit', e => {
      e.preventDefault();
      const key = document.getElementById('shortcutKey').value.trim();
      const desc = document.getElementById('shortcutDesc').value.trim();
      if (!key || !desc) return;

      const shortcut = { key, desc };
      addShortcutToList(shortcut);
      saveShortcut(shortcut);

      form.reset();
    });

    // 페이지 로드 시 저장된 목록 불러오기
    document.addEventListener('DOMContentLoaded', loadShortcuts);
  </script>

</body>
</html>